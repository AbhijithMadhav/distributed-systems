<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1146px" height="436px" viewBox="-0.5 -0.5 1146 436" content="&lt;mxfile host=&quot;Electron&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/24.7.8 Chrome/128.0.6613.36 Electron/32.0.1 Safari/537.36&quot; scale=&quot;1&quot; border=&quot;0&quot; version=&quot;24.7.8&quot;&gt;&#10;  &lt;diagram name=&quot;Page-1&quot; id=&quot;yOJB7uXh0PDJYoCGDpvq&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;952&quot; dy=&quot;642&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-115&quot; value=&quot;&amp;lt;b&amp;gt;Streaming matching Service&amp;lt;/b&amp;gt;&quot; style=&quot;rounded=1;whiteSpace=wrap;html=1;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;fillColor=#dae8fc;strokeColor=#6c8ebf;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;318&quot; y=&quot;510&quot; width=&quot;912&quot; height=&quot;300&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-44&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;&quot; parent=&quot;1&quot; target=&quot;gNMw5Ef5aIwK08pEGqAp-49&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;190&quot; y=&quot;590&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;339&quot; y=&quot;590&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;205&quot; y=&quot;590&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-96&quot; value=&quot;POST /play-request&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-44&quot; vertex=&quot;1&quot; connectable=&quot;0&quot;&gt;&#10;          &lt;mxGeometry x=&quot;0.157&quot; y=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;-1&quot; y=&quot;-3&quot; as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-52&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.51;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;&quot; parent=&quot;1&quot; source=&quot;gNMw5Ef5aIwK08pEGqAp-49&quot; target=&quot;gNMw5Ef5aIwK08pEGqAp-51&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;778&quot; y=&quot;780&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-51&quot; value=&quot;stateless&amp;lt;div&amp;gt;request&amp;lt;div&amp;gt;transformer&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&quot; style=&quot;ellipse;whiteSpace=wrap;html=1;aspect=fixed;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;588&quot; y=&quot;550&quot; width=&quot;80&quot; height=&quot;80&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-63&quot; value=&quot;&quot; style=&quot;group&quot; parent=&quot;1&quot; vertex=&quot;1&quot; connectable=&quot;0&quot;&gt;&#10;          &lt;mxGeometry x=&quot;808&quot; y=&quot;570&quot; width=&quot;50&quot; height=&quot;50&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-53&quot; value=&quot;&quot; style=&quot;html=1;verticalLabelPosition=bottom;align=center;labelBackgroundColor=#ffffff;verticalAlign=top;strokeWidth=2;strokeColor=#0080F0;shadow=0;dashed=0;shape=mxgraph.ios7.icons.window;&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-63&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-54&quot; value=&quot;&quot; style=&quot;html=1;verticalLabelPosition=bottom;align=center;labelBackgroundColor=#ffffff;verticalAlign=top;strokeWidth=2;strokeColor=#0080F0;shadow=0;dashed=0;shape=mxgraph.ios7.icons.window;&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-63&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;10&quot; y=&quot;10&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-55&quot; value=&quot;&quot; style=&quot;html=1;verticalLabelPosition=bottom;align=center;labelBackgroundColor=#ffffff;verticalAlign=top;strokeWidth=2;strokeColor=#0080F0;shadow=0;dashed=0;shape=mxgraph.ios7.icons.window;&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-63&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;20&quot; y=&quot;20&quot; width=&quot;30&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-64&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.033;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;&quot; parent=&quot;1&quot; source=&quot;gNMw5Ef5aIwK08pEGqAp-51&quot; target=&quot;gNMw5Ef5aIwK08pEGqAp-54&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-65&quot; value=&quot;Try to group requests by 1 min windowing&quot; style=&quot;text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;678&quot; y=&quot;560&quot; width=&quot;120&quot; height=&quot;60&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-68&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;&quot; parent=&quot;1&quot; target=&quot;gNMw5Ef5aIwK08pEGqAp-69&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;860&quot; y=&quot;590&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;568&quot; y=&quot;1111&quot; as=&quot;targetPoint&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-77&quot; value=&quot;Matching successful.&amp;lt;div&amp;gt;Emits matched pair as&amp;amp;nbsp;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;and when matched within window&amp;lt;/div&amp;gt;&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-68&quot; vertex=&quot;1&quot; connectable=&quot;0&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.1002&quot; y=&quot;-1&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;15&quot; y=&quot;-6&quot; as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-69&quot; value=&quot;&quot; style=&quot;verticalLabelPosition=bottom;html=1;verticalAlign=top;align=center;strokeColor=none;fillColor=#00BEF2;shape=mxgraph.azure.queue_generic;pointerEvents=1;rotation=0;labelPosition=center;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1080&quot; y=&quot;575&quot; width=&quot;110&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-70&quot; value=&quot;&amp;lt;pre&amp;gt;&amp;lt;font face=&amp;quot;Helvetica&amp;quot;&amp;gt;Games generated out of matches&amp;lt;/font&amp;gt;&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;{ &amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;game_id : 2345234,&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;request1 : {...},&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;request2 : {...}&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;}&amp;lt;/pre&amp;gt;&quot; style=&quot;text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;labelBorderColor=none;labelBackgroundColor=none;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;1060&quot; y=&quot;670&quot; width=&quot;60&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-111&quot; value=&quot;&amp;lt;ol&amp;gt;&amp;lt;li&amp;gt;&amp;lt;span style=&amp;quot;text-align: center;&amp;quot;&amp;gt;&amp;amp;nbsp;Transform rating to rating range. Rating ranges are buckets of 200 starting from 1-200&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;li&amp;gt;&amp;lt;span style=&amp;quot;text-align: center;&amp;quot;&amp;gt;Now repartition by game type and rating range. Doing this ensures matched requests flow through partitions&amp;lt;/span&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;/ol&amp;gt;&quot; style=&quot;text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;529&quot; y=&quot;690&quot; width=&quot;229&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-49&quot; value=&quot;Play requests&amp;lt;div&amp;gt;partitioned by&amp;amp;nbsp;&amp;lt;/div&amp;gt;&amp;lt;div&amp;gt;request-id&amp;lt;/div&amp;gt;&quot; style=&quot;verticalLabelPosition=top;html=1;verticalAlign=bottom;align=center;strokeColor=none;fillColor=#00BEF2;shape=mxgraph.azure.queue_generic;pointerEvents=1;container=0;labelPosition=center;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;344&quot; y=&quot;575&quot; width=&quot;110&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-61&quot; value=&quot;&amp;lt;pre&amp;gt;{ &amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;request_id : 1234,&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;player_id : 3453,&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;game_type : 3 min&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;player_rating : 1023&amp;lt;/pre&amp;gt;&amp;lt;pre&amp;gt;}&amp;lt;/pre&amp;gt;&quot; style=&quot;text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;container=0;&quot; parent=&quot;1&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry x=&quot;339&quot; y=&quot;670&quot; width=&quot;60&quot; height=&quot;30&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-130&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.51;exitDx=0;exitDy=0;exitPerimeter=0;&quot; parent=&quot;1&quot; source=&quot;gNMw5Ef5aIwK08pEGqAp-69&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;1190&quot; y=&quot;590&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;1320&quot; y=&quot;590&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;1300&quot; y=&quot;590&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-134&quot; value=&quot;&quot; style=&quot;edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.367;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;&quot; parent=&quot;1&quot; source=&quot;gNMw5Ef5aIwK08pEGqAp-55&quot; edge=&quot;1&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;839&quot; y=&quot;620&quot; as=&quot;sourcePoint&quot; /&gt;&#10;            &lt;mxPoint x=&quot;839&quot; y=&quot;920&quot; as=&quot;targetPoint&quot; /&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;839&quot; y=&quot;920&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;gNMw5Ef5aIwK08pEGqAp-135&quot; value=&quot;No match found&amp;lt;div&amp;gt;Client should try later&amp;lt;/div&amp;gt;&quot; style=&quot;edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];&quot; parent=&quot;gNMw5Ef5aIwK08pEGqAp-134&quot; vertex=&quot;1&quot; connectable=&quot;0&quot;&gt;&#10;          &lt;mxGeometry x=&quot;-0.4972&quot; y=&quot;-3&quot; relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;mxPoint x=&quot;2&quot; y=&quot;17&quot; as=&quot;offset&quot; /&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-115"><g><rect x="135" y="17" width="912" height="300" rx="45" ry="45" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 910px; height: 1px; padding-top: 14px; margin-left: 136px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><b>Streaming matching Service</b></div></div></div></foreignObject><text x="591" y="14" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">Streaming matching Service</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-44"><g><path d="M 7 97 L 22 97 L 154.63 97" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 159.88 97 L 152.88 100.5 L 154.63 97 L 152.88 93.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-96"><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 96px; margin-left: 96px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">POST /play-request</div></div></div></foreignObject><text x="96" y="99" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle">POST /play-request</text></switch></g></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-52"><g><path d="M 271 97.3 L 338 97.3 L 398.63 97.03" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 403.88 97.01 L 396.9 100.54 L 398.63 97.03 L 396.87 93.54 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-51"><g><ellipse cx="445" cy="97" rx="40" ry="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 97px; margin-left: 406px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">stateless<div>request<div>transformer</div></div></div></div></div></foreignObject><text x="445" y="101" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">stateless...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-63"><g/><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-53"><g><rect x="625" y="77" width="30" height="30" fill="rgb(255, 255, 255)" stroke="#0080f0" stroke-width="2" pointer-events="all"/><path d="M 625 80.6 L 655 80.6 M 626.2 78.8 L 626.8 78.8 M 627.7 78.8 L 628.3 78.8 M 629.2 78.8 L 653.8 78.8" fill="none" stroke="#0080f0" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-54"><g><rect x="635" y="87" width="30" height="30" fill="rgb(255, 255, 255)" stroke="#0080f0" stroke-width="2" pointer-events="all"/><path d="M 635 90.6 L 665 90.6 M 636.2 88.8 L 636.8 88.8 M 637.7 88.8 L 638.3 88.8 M 639.2 88.8 L 663.8 88.8" fill="none" stroke="#0080f0" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-55"><g><rect x="645" y="97" width="30" height="30" fill="rgb(255, 255, 255)" stroke="#0080f0" stroke-width="2" pointer-events="all"/><path d="M 645 100.6 L 675 100.6 M 646.2 98.8 L 646.8 98.8 M 647.7 98.8 L 648.3 98.8 M 649.2 98.8 L 673.8 98.8" fill="none" stroke="#0080f0" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-64"><g><path d="M 485 97 L 560 97 L 560 99 L 629.62 99" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 634.87 99 L 627.87 102.5 L 629.62 99 L 627.87 95.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-65"><g><rect x="495" y="67" width="120" height="60" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 97px; margin-left: 496px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Try to group requests by 1 min windowing</div></div></div></foreignObject><text x="555" y="101" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">Try to group request...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-68"><g><path d="M 677 97 L 787.5 97.5 L 890.63 97.03" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 895.88 97.01 L 888.9 100.54 L 890.63 97.03 L 888.87 93.54 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-77"><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 93px; margin-left: 791px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">Matching successful.<div>Emits matched pair as </div><div>and when matched within window</div></div></div></div></foreignObject><text x="791" y="96" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle">Matching successful....</text></switch></g></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-69"><g><rect x="897" y="82" width="110" height="30" fill="none" stroke="none" pointer-events="all"/><path d="M 897.12 84.23 C 897.53 82.9 898.91 82 900.45 82.05 L 997.01 82.05 L 1007 97.42 L 997.01 112 L 900.23 112 C 899.3 111.95 898.44 111.56 897.85 110.92 C 897.26 110.28 897 109.45 897.12 108.63 Z M 899.34 108.33 C 899.6 109.34 900.63 110.04 901.78 110.02 L 996.01 110.02 L 1004.78 97.42 L 996.01 83.93 L 901.78 83.93 C 900.77 83.84 899.8 84.31 899.34 85.12 Z M 902.67 89.09 C 902.76 88.18 903.54 87.44 904.56 87.31 L 929.2 87.31 C 930.21 87.44 930.99 88.18 931.08 89.09 L 931.08 105.36 C 930.81 106.15 930.01 106.7 929.09 106.74 L 904.78 106.74 C 903.86 106.7 903.06 106.15 902.78 105.36 Z M 905.67 92.86 L 905.67 104.36 L 928.31 104.36 L 928.31 92.66 L 917.88 99.7 C 917.14 100.14 916.18 100.14 915.44 99.7 Z M 916.77 97.52 L 927.87 89.79 L 905.78 89.79 Z M 934.19 89.09 C 934.24 88.26 934.86 87.55 935.75 87.31 L 960.72 87.31 C 961.6 87.55 962.22 88.26 962.27 89.09 L 962.27 105.36 C 962.06 106.03 961.47 106.56 960.72 106.74 L 935.75 106.74 C 934.99 106.56 934.4 106.03 934.19 105.36 Z M 936.97 92.76 L 936.97 104.36 L 959.61 104.36 L 959.5 92.76 L 949.29 99.7 C 948.5 100.23 947.41 100.23 946.62 99.7 Z M 948.07 97.52 L 959.28 89.79 L 936.97 89.79 Z M 965.49 89.09 C 965.58 88.18 966.36 87.44 967.38 87.31 L 991.91 87.31 C 992.92 87.44 993.7 88.18 993.79 89.09 L 993.79 104.96 C 993.74 105.49 993.45 105.97 992.99 106.31 C 992.53 106.64 991.94 106.8 991.35 106.74 L 967.38 106.74 C 966.49 106.66 965.75 106.11 965.49 105.36 Z M 968.15 92.76 L 968.15 104.36 L 990.8 104.36 L 990.8 92.76 L 980.36 99.7 C 979.68 100.06 978.83 100.06 978.14 99.7 Z M 979.36 97.52 L 990.46 89.79 L 968.27 89.79 Z" fill="#00bef2" stroke="none" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-70"><g><rect x="877" y="177" width="60" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 58px; height: 1px; padding-top: 192px; margin-left: 879px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre><font face="Helvetica">Games generated out of matches</font></pre><pre>{ </pre><pre>game_id : 2345234,</pre><pre>request1 : {...},</pre><pre>request2 : {...}</pre><pre>}</pre></div></div></div></foreignObject><text x="879" y="196" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px">Games gene...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-111"><g><rect x="346" y="197" width="229" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 227px; height: 1px; padding-top: 212px; margin-left: 348px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ol><li><span style="text-align: center;"> Transform rating to rating range. Rating ranges are buckets of 200 starting from 1-200</span></li><li><span style="text-align: center;">Now repartition by game type and rating range. Doing this ensures matched requests flow through partitions</span></li></ol></div></div></div></foreignObject><text x="348" y="216" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px">Transform rating to rating range. Rat...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-49"><g><rect x="161" y="82" width="110" height="30" fill="none" stroke="none" pointer-events="all"/><path d="M 161.12 84.23 C 161.53 82.9 162.91 82 164.45 82.05 L 261.01 82.05 L 271 97.42 L 261.01 112 L 164.23 112 C 163.3 111.95 162.44 111.56 161.85 110.92 C 161.26 110.28 161 109.45 161.12 108.63 Z M 163.34 108.33 C 163.6 109.34 164.63 110.04 165.78 110.02 L 260.01 110.02 L 268.78 97.42 L 260.01 83.93 L 165.78 83.93 C 164.77 83.84 163.8 84.31 163.34 85.12 Z M 166.67 89.09 C 166.76 88.18 167.54 87.44 168.56 87.31 L 193.2 87.31 C 194.21 87.44 194.99 88.18 195.08 89.09 L 195.08 105.36 C 194.81 106.15 194.01 106.7 193.09 106.74 L 168.78 106.74 C 167.86 106.7 167.06 106.15 166.78 105.36 Z M 169.67 92.86 L 169.67 104.36 L 192.31 104.36 L 192.31 92.66 L 181.88 99.7 C 181.14 100.14 180.18 100.14 179.44 99.7 Z M 180.77 97.52 L 191.87 89.79 L 169.78 89.79 Z M 198.19 89.09 C 198.24 88.26 198.86 87.55 199.75 87.31 L 224.72 87.31 C 225.6 87.55 226.22 88.26 226.27 89.09 L 226.27 105.36 C 226.06 106.03 225.47 106.56 224.72 106.74 L 199.75 106.74 C 198.99 106.56 198.4 106.03 198.19 105.36 Z M 200.97 92.76 L 200.97 104.36 L 223.61 104.36 L 223.5 92.76 L 213.29 99.7 C 212.5 100.23 211.41 100.23 210.62 99.7 Z M 212.07 97.52 L 223.28 89.79 L 200.97 89.79 Z M 229.49 89.09 C 229.58 88.18 230.36 87.44 231.38 87.31 L 255.91 87.31 C 256.92 87.44 257.7 88.18 257.79 89.09 L 257.79 104.96 C 257.74 105.49 257.45 105.97 256.99 106.31 C 256.53 106.64 255.94 106.8 255.35 106.74 L 231.38 106.74 C 230.49 106.66 229.75 106.11 229.49 105.36 Z M 232.15 92.76 L 232.15 104.36 L 254.8 104.36 L 254.8 92.76 L 244.36 99.7 C 243.68 100.06 242.83 100.06 242.14 99.7 Z M 243.36 97.52 L 254.46 89.79 L 232.27 89.79 Z" fill="#00bef2" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 79px; margin-left: 216px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Play requests<div>partitioned by </div><div>request-id</div></div></div></div></foreignObject><text x="216" y="79" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px" text-anchor="middle">Play requests...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-61"><g><rect x="156" y="177" width="60" height="30" fill="none" stroke="none" pointer-events="all"/></g><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 58px; height: 1px; padding-top: 192px; margin-left: 158px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><pre>{ </pre><pre>request_id : 1234,</pre><pre>player_id : 3453,</pre><pre>game_type : 3 min</pre><pre>player_rating : 1023</pre><pre>}</pre></div></div></div></foreignObject><text x="158" y="196" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="12px">{...</text></switch></g></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-130"><g><path d="M 1007 97.3 L 1117 97.3 L 1130.63 97.1" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1135.88 97.02 L 1128.94 100.62 L 1130.63 97.1 L 1128.83 93.62 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-134"><g><path d="M 656 127 L 656 420.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 656 425.88 L 652.5 418.88 L 656 420.63 L 659.5 418.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/></g><g data-cell-id="gNMw5Ef5aIwK08pEGqAp-135"><g><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 220px; margin-left: 656px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">No match found<div>Client should try later</div></div></div></div></foreignObject><text x="656" y="223" fill="rgb(0, 0, 0)" font-family="&quot;Helvetica&quot;" font-size="11px" text-anchor="middle">No match found...</text></switch></g></g></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>